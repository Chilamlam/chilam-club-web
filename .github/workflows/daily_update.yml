name: Daily RPS Update

on:
  schedule:
    # ä¿®æ”¹ä¸º UTC 9:05 (åŒ—äº¬æ—¶é—´ 17:05)ï¼Œé¿å¼€æ•´ç‚¹é«˜å³°æœŸï¼Œæ›´å®¹æ˜“è§¦å‘
    - cron: '5 9 * * *' 
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        pip install pandas tushare lxml

    - name: Run daily scripts
      env:
        TUSHARE_TOKEN: ${{ secrets.TUSHARE_TOKEN }}
      # ğŸ‘‡ è¿™é‡Œæ”¹äº†ï¼šç”¨ && è¿æ¥ï¼Œä¾æ¬¡è¿è¡Œä¸¤ä¸ªè„šæœ¬
      run: |
        python daily_rps_pro.py
        python daily_etf_pro.py

    - name: Commit and push changes
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: "Auto-update Stocks & ETFs"
        file_pattern: data/*.csv
